<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Soil Input Tables</title>
  <!-- Link to external CSS -->
  <link rel="stylesheet" href="./src/style.css">
  <script type="module" src="./src/main.js"></script>
  <script src="https://cdn.sheetjs.com/xlsx-latest/package/dist/xlsx.full.min.js"></script>


</head>
<body>

<!--------------------- TABLE 1----------------------->
<h1>Initial Inputs</h1>
<table id="inputTable" border="1">
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Value</th>
      <th>Units</th>
    </tr>
  </thead>
  <tbody>

    <tr>
      <td>RL of the TOP of borehole</td>
      <td><input type="number" id="rl_borehole" /></td>
      <td>m</td>
    </tr>

    <tr>
      <td>Approx RL at TOP of pile</td>
      <td><input type="number" id="rl_pile_top" /></td>
      <td>m</td>
    </tr>

    <tr>
      <td>Excavation or Soil Depth to be ignored</td>
      <td><input type="number" id="soil_ignore" /></td>
      <td>m</td>
    </tr>

    <tr>
      <td>Ground water table at RL</td>
      <td><input type="number" id="water_table" /></td>
      <td>m</td>
    </tr>

    <tr>
      <td>Shaft Capacity from soil considered at RL</td>
      <td id="shaft_rl"></td>
      <td>m</td>
    </tr>

    <tr>
      <td>Pile critical length ratio</td>
      <td><input type="number" id="critical_ratio" step="0.01" /></td>
      <td>-</td>
    </tr>

    <tr>
      <td>Pile critical length</td>
      <td id="critical_length">0</td>
      <td>m</td>
    </tr>

    <tr>
      <td>Socket length starts at RL (rock)</td>
      <td><input type="number" id="socket_start" /></td>
      <td>m</td>
    </tr>

    <tr>
      <td>Socket length to be ignored</td>
      <td><input type="number" id="socket_ignore" /></td>
      <td>m</td>
    </tr>

    <tr>
      <td>Actual socketing starts at RL</td>
      <td id="actual_socket"></td>
      <td>m</td>
    </tr>

    <tr>
      <td>Pile diameter</td>
      <td><input type="number" id="pile_diameter" step="0.01" /></td>
      <td>mm</td>
    </tr>

    <tr>
      <td>Ultimate compression S* (ULS)</td>
      <td><input type="number" id="uls" /></td>
      <td>kN</td>
    </tr>

    <tr>
      <td>Serviceability compression PSLS (SLS)</td>
      <td><input type="number" id="sls" /></td>
      <td>kN</td>
    </tr>

    <tr>
      <td>Maximum allowable settlement</td>
      <td><input type="number" id="settlement" step="0.1" /></td>
      <td>mm</td>
    </tr>
  </tbody>
</table>

<!--------------------- TABLE 2----------------------->
<h1>Subsurface Conditions (Soil Only)</h1>
<table id="soilTable" border="1">
  <thead>
    <tr>
      <th colspan="2">Depth</th>
      <th rowspan="2">Depth (m)</th>
      <th rowspan="2">Strata thickness, z (m)</th>
      <th colspan="2">RL</th>
      <th rowspan="2">Soil Type</th>
      <th rowspan="2">ID of Soil Type</th>
      <th colspan="2">Drained Soil Parameters</th>
      <th colspan="2">Undrained Soil Parameters</th>
      <th rowspan="2">γ (kN/m³)</th>
      <th rowspan="2">σv' at Layer Base (kPa)</th>
    </tr>
    <tr>
      <th>from (m)</th>
      <th>to (m)</th>
      <th>from (m)</th>
      <th>to (m)</th>
      <th>F</th>
      <th>φ' (deg)</th>
      <th>α</th>
      <th>cu (kPa)</th>
    </tr>
  </thead>
    <tbody>
      <tr>
        <td id="soilDepthFrom1"></td>
        <td><input type="number" id="soilDepthTo1" /></td>
        <td class="soilDepthTo1_value" ></td>
        <td id = "strataThickness1"></td>
        <td id="soilRLfrom1" ></td>
        <td id="soilRLto1" ></td>
        <td><input type="text" id="soilType1" /></td>
        <td><input type="number" id="ID1" /></td>
        <td id="F1" ></td>
        <td id="phi1" ></td>
      </tr>
      <tr>
        <td class="soilDepthTo1_value" ></td>
        <td><input type="number" id="soilDepthTo2" /></td>
        <td class="soilDepthTo2_value" ></td>
        <td id = "strataThickness2"></td>
        <td id="soilRLfrom2" ></td>
        <td id="soilRLto2" ></td>
        <td><input type="text" id="soilType2" /></td>
        <td><input type="number" id="ID2" /></td>
        <td id="F2" ></td>
        <td id="phi2" ></td>
      </tr>
      <tr>
        <td class="soilDepthTo2_value" ></td>
        <td><input type="number" id="soilDepthTo3" /></td>
        <td class="soilDepthTo3_value" ></td>
        <td id = "strataThickness3"></td>
        <td id="soilRLfrom3" ></td>
        <td id="soilRLto3" ></td>
        <td><input type="text" id="soilType3" /></td>
        <td><input type="number" id="ID3" /></td>
        <td id="F3" ></td>
        <td id="phi3" ></td>
      </tr>
      <tr>
        <td class="soilDepthTo3_value" ></td>
        <td><input type="number" id="soilDepthTo4" /></td>
        <td class="soilDepthTo4_value" ></td>
        <td id = "strataThickness4"></td>
        <td id="soilRLfrom4" ></td>
        <td id="soilRLto4" ></td>
        <td><input type="text" id="soilType4" /></td>
        <td><input type="number" id="ID4" /></td>
        <td id="F4" ></td>
        <td id="phi4" ></td>
      </tr>
  </tbody>
</table>
<script>
  // Global list of soil/rock classes
  const soilClasses = [
    "GC-vd","GM-vd","GP-vd","GW-vd","GC-d","GM-d","GP-d","GW-d",
    "GC-md","GM-md","GP-md","GW-md","GC-l","GM-l","GP-l","GW-l",
    "GC-vl","GM-vl","GP-vl","GW-vl","SC-vd","SM-vd","SP-vd","SW-vd",
    "SC-d","SM-d","SP-d","SW-d","SC-md","SM-md","SP-md","SW-md",
    "SC-l","SM-l","SP-l","SW-l","SC-vl","SM-vl","SP-vl","SW-vl",
    "ML-h","OL-h","CL-h","ML-vst","OL-vst","CL-vst","ML-st","OL-st","CL-st",
    "ML-f","OL-f","CL-f","ML-s","OL-s","CL-s","ML-vs","OL-vs","CL-vs",
    "MH-h","OH-h","CH-h","MH-vst","OH-vst","CH-vst","CH-st","OH-st","MH-st",
    "MH-f","OH-f","CH-f","MH-s","OH-s","CH-s","MH-vs","OH-vs","CH-vs",
    "UF-","EF-","Q-1A","Q-1B","Q-1C","Q-1D","Q-2A","Q-2B","Q-2C",
    "C-1A","C-1B","C-1C","C-1D","C-2A","C-2B","C-2C",
    "RS-1A","RS-1B","RS-1C","RS-2A","RS-2B","AR-5","AR-4","AR-3","AR-2","AR-1",
    "FZ/SZ-","1"
  ];

  // Function to create a reusable select
  function createSoilSelect(id, defaultValue = "") {
    const select = document.createElement("select");
    select.id = id;

    // Empty option
    const emptyOption = document.createElement("option");
    emptyOption.value = "";
    emptyOption.textContent = "--Select--";
    select.appendChild(emptyOption);

    // Add all soil classes
    soilClasses.forEach(cls => {
      const option = document.createElement("option");
      option.value = cls;
      option.textContent = cls;
      if (cls === defaultValue) option.selected = true;
      select.appendChild(option);
    });

    return select;
  }

  // Replace each soilType input with a select
  for (let i = 1; i <= 4; i++) { // your table has 4 soil rows
    const td = document.getElementById(`soilType${i}`).parentNode; // get the parent td
    td.innerHTML = ""; // clear the input
    td.appendChild(createSoilSelect(`soilType${i}`));
  }
</script>

</body>
</html>
